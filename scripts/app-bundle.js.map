{"version":3,"sources":["src/app.js","src/environment.js","src/home.js","src/main.js","src/resources/index.js","src/services/async-http-client.js","src/services/donation-service.js","src/services/fixtures.js","src/services/messages.js","src/viewmodels/candidates/candidates.js","src/viewmodels/dashboard/dashboard.js","src/viewmodels/login/login.js","src/viewmodels/donate/donate.js","src/viewmodels/logout/logout.js","src/viewmodels/report/report.js","src/viewmodels/signup/signup.js","src/viewmodels/stats/stats.js"],"names":["App","ds","au","ea","subscribe","router","navigate","replace","trigger","reset","msg","status","setRoot","configureRouter","config","map","route","name","moduleId","nav","title","attached","isAuthenticated","then","navigateToRoute","debug","testing","Home","aurelia","mapUnknownRoutes","configure","use","standardConfiguration","feature","developmentLogging","plugin","start","AsyncHttpClient","httpClient","fixtures","http","withBaseUrl","baseUrl","authenticate","url","user","post","response","content","success","localStorage","donation","JSON","stringify","configuration","withHeader","token","publish","catch","message","authenticated","auth","parse","clearAuthentication","get","obj","delete","DonationService","data","ac","donations","methods","candidates","users","total","getCandidates","res","getUsers","getDonations","donate","amount","method","candidate","_id","returnedDonation","push","console","log","firstName","lastName","parseInt","addCandidate","office","register","email","password","newUser","login","logout","Fixtures","TotalUpdate","LoginStatus","Candidate","donationService","initFields","Dashboard","Login","prompt","e","Donate","selectedMethod","selectedCandidate","makeDonation","Logout","Report","Signup","showSignup","Stats"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {inject, Aurelia} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from './services/messages';\nimport DonationService from './services/donation-service';\n\n@inject(DonationService, Aurelia, EventAggregator)\nexport class App {\n\n  constructor(ds, au, ea) {\n    this.au = au;\n    this.ds = ds;\n    ea.subscribe(LoginStatus, msg => {\n      this.router.navigate('/', { replace: true, trigger: false });\n      this.router.reset();\n      if (msg.status === true) {\n        au.setRoot('home');\n      } else {\n        au.setRoot('app');\n      }\n    });\n  }\n\n  configureRouter(config, router) {\n    config.map([\n      { route: ['', 'login'], name: 'login', moduleId: 'viewmodels/login/login', nav: true, title: 'Login' },\n      { route: 'signup', name: 'signup', moduleId: 'viewmodels/signup/signup', nav: true, title: 'Signup' }\n    ]);\n    this.router = router;\n  }\n\n  attached() {\n    if (this.ds.isAuthenticated()) {\n      this.au.setRoot('home').then(() => {\n        this.router.navigateToRoute('dashboard');\n      });\n    }\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import { inject, Aurelia } from 'aurelia-framework';\n\n@inject(Aurelia)\nexport class Home {\n\n  constructor(au) {\n    this.aurelia = au;\n  }\n\n  configureRouter(config, router) {\n    config.map([\n      { route: ['', 'home'], name: 'donate', moduleId: 'viewmodels/donate/donate', nav: true, title: 'Donate' },\n      { route: 'report', name: 'report', moduleId: 'viewmodels/report/report', nav: true, title: 'Report' },\n      { route: 'candidates', name: 'candidates', moduleId: 'viewmodels/candidates/candidates', nav: true, title: 'Candidates' },\n      { route: 'stats', name: 'stats', moduleId: 'viewmodels/stats/stats', nav: true, title: 'Stats' },\n      { route: 'dashboard', name: 'dashboard', moduleId: 'viewmodels/dashboard/dashboard', nav: true, title: 'Dashboard' },\n      { route: 'logout', name: 'logout', moduleId: 'viewmodels/logout/logout', nav: true, title: 'Logout' }\n    ]);\n    this.router = router;\n\n    config.mapUnknownRoutes(instruction => {\n      return 'home';\n    });\n  }\n}\n","import environment from './environment';\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport Fixtures from './fixtures';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from './messages';\n\n@inject(HttpClient, Fixtures, EventAggregator )\nexport default class AsyncHttpClient {\n\n  constructor(httpClient, fixtures, ea) {\n    this.http = httpClient;\n    this.http.configure(http => {\n      http.withBaseUrl(fixtures.baseUrl);\n    });\n    this.ea = ea;\n  }\n\n  authenticate(url, user) {\n    this.http.post(url, user).then(response => {\n      const status = response.content;\n      if (status.success) {\n        localStorage.donation = JSON.stringify(response.content);\n        this.http.configure(configuration => {\n          configuration.withHeader('Authorization', 'bearer ' + response.content.token);\n        });\n      }\n      this.ea.publish(new LoginStatus(status));\n    }).catch(error => {\n      const status = {\n        success: false,\n        message: 'service not available'\n      };\n      this.ea.publish(new LoginStatus(status));\n    });\n  }\n\n  isAuthenticated() {\n    let authenticated = false;\n    if (localStorage.donation !== 'null') {\n      authenticated = true;\n      this.http.configure(http => {\n        const auth = JSON.parse(localStorage.donation);\n        http.withHeader('Authorization', 'bearer ' + auth.token);\n      });\n    }\n    return authenticated;\n  }\n\n  clearAuthentication() {\n    localStorage.donation = null;\n    this.http.configure(configuration => {\n      configuration.withHeader('Authorization', '');\n    });\n  }\n\n  get(url) {\n    return this.http.get(url);\n  }\n\n  post(url, obj) {\n    return this.http.post(url, obj);\n  }\n\n  delete(url) {\n    return this.http.delete(url);\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport Fixtures from './fixtures';\nimport {TotalUpdate, LoginStatus} from './messages';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport AsyncHttpClient from './async-http-client';\n\n@inject(Fixtures, EventAggregator, AsyncHttpClient)\nexport default class DonationService {\n\n  donations = [];\n  methods = [];\n  candidates = [];\n  users = [];\n  total = 0;\n\n  constructor(data, ea, ac) {\n    this.methods = data.methods;\n    this.ea = ea;\n    this.ac = ac;\n    this.getCandidates();\n  }\n\n  getCandidates() {\n    this.ac.get('/api/candidates').then(res => {\n      this.candidates = res.content;\n    });\n  }\n\n  getUsers() {\n    this.ac.get('/api/users').then(res => {\n      this.users = res.content;\n    });\n  }\n\n  getDonations() {\n    this.ac.get('/api/donations').then(res => {\n      this.donations = res.content;\n    });\n  }\n\n  donate(amount, method, candidate) {\n    const donation = {\n      amount: amount,\n      method: method\n    };\n    this.ac.post('/api/candidates/' + candidate._id + '/donations', donation).then(res => {\n      const returnedDonation = res.content;\n      this.donations.push(returnedDonation);\n      console.log(amount + ' donated to ' + candidate.firstName + ' ' + candidate.lastName + ': ' + method);\n\n      this.total = this.total + parseInt(amount, 10);\n      console.log('Total so far ' + this.total);\n      this.ea.publish(new TotalUpdate(this.total));\n    });\n  }\n\n  addCandidate(firstName, lastName, office) {\n    const candidate = {\n      firstName: firstName,\n      lastName: lastName,\n      office: office\n    };\n    this.ac.post('/api/candidates', candidate).then(res => {\n      this.candidates.push(res.content);\n    });\n  }\n\n  register(firstName, lastName, email, password) {\n    const newUser = {\n      firstName: firstName,\n      lastName: lastName,\n      email: email,\n      password: password\n    };\n    this.ac.post('/api/users', newUser).then(res => {\n      this.getUsers();\n    });\n  }\n\n  login(email, password) {\n    const user = {\n      email: email,\n      password: password\n    };\n    this.ac.authenticate('/api/users/authenticate', user);\n  }\n\n  logout() {\n    const status = {\n      success: false,\n      message: ''\n    };\n    this.ac.clearAuthentication();\n    this.ea.publish(new LoginStatus(status));\n  }\n\n  isAuthenticated() {\n    return this.ac.isAuthenticated();\n  }\n}\n","export default class Fixtures {\n\n  baseUrl = 'https://morning-ridge-51855.herokuapp.com';\n  methods = ['Cash', 'PayPal'];\n}\n","export class TotalUpdate {\n  constructor(total) {\n    this.total = total;\n  }\n}\n\nexport class LoginStatus {\n  constructor(status) {\n    this.status = status;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from '../../services/donation-service';\n\n@inject(DonationService)\nexport class Candidate {\n\n  firstName = '';\n  lastName = '';\n  office = '';\n\n  constructor(ds) {\n    this.donationService = ds;\n  }\n\n  addCandidate() {\n    this.donationService.addCandidate(this.firstName, this.lastName, this.office);\n    this.initFields();\n  }\n\n  initFields() {\n    this.firstName = '';\n    this.lastName = '';\n    this.office = '';\n  }\n}\n","export class Dashboard {\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from '../../services/donation-service';\n\n@inject(DonationService)\nexport class Login {\n\n  email = 'marge@simpson.com';\n  password = 'secret';\n\n  constructor(ds) {\n    this.donationService = ds;\n    this.prompt = '';\n  }\n\n  login(e) {\n    console.log(`Trying to log in ${this.email}`);\n    this.donationService.login(this.email, this.password);\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from '../../services/donation-service';\n\n@inject(DonationService)\nexport class Donate {\n\n  amount = 0;\n\n  methods = [];\n  selectedMethod = '';\n\n  candidates = [];\n  selectedCandidate = '';\n\n  constructor(ds) {\n    this.donationService = ds;\n    this.methods = ds.methods;\n    this.selectedMethod = this.methods[0];\n    this.candidates = ds.candidates;\n    this.selectedCandidate = this.candidates[0];\n  }\n\n  makeDonation() {\n    this.donationService.donate(this.amount, this.selectedMethod, this.selectedCandidate);\n  }\n}\n","import DonationService from '../../services/donation-service';\nimport {inject} from 'aurelia-framework';\n\n@inject(DonationService)\nexport class Logout {\n\n  constructor(donationService) {\n    this.donationService = donationService;\n  }\n\n  logout() {\n    console.log('logging out');\n    this.donationService.logout();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from '../../services/donation-service';\n\n@inject(DonationService)\nexport class Report {\n\n  donations = [];\n\n  constructor(ds) {\n    this.donationService = ds;\n    this.donations = this.donationService.donations;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from '../../services/donation-service';\n\n@inject(DonationService)\nexport class Signup {\n\n  firstName = 'Marge';\n  lastName = 'Simpson';\n  email = 'marge@simpson.com';\n  password = 'secret';\n\n  constructor(ds) {\n    this.donationService = ds;\n  }\n\n  register(e) {\n    this.showSignup = false;\n    this.donationService.register(this.firstName, this.lastName, this.email, this.password);\n    this.donationService.login(this.email, this.password);\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {TotalUpdate} from '../../services/messages';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport DonationService from '../../services/donation-service';\n\n@inject(EventAggregator, DonationService)\nexport class Stats {\n\n  total = 0;\n\n  constructor(ea, ds) {\n    this.ds = ds;\n    ea.subscribe(TotalUpdate, msg => {\n      this.total = msg.total;\n    });\n  }\n\n  attached() {\n    this.total = this.ds.total;\n  }\n}\n"],"sourceRoot":".."}